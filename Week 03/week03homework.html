<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="stylesheet" type="text/css" href="week03homework_style.css">

	<title></title>
</head>
<body>

	<!-- Navbar -->
	<div id="navbarrrrr">
		<div class="nav-item h1">Milo Number Adder</div>
	    <div class="nav-item h4">ITEM 1</div>
	    <div class="nav-item h4">ITEM 2</div>
	    <div class="nav-item h4">ITEM 3</div>
	</div>

	<!-- Main Content -->
	<div id="main-contenttttt">

		<!-- Sidebar -->
		<div class="sidebar">
			<h3 class="h3">RESULT</h3>
			<p id="resultId">0</p>
		    <p id="totalMessage">The total is zero.</p> 
		    <h4 class="h4">History</h4> 
   			<p id="summary"></p> 
		    <ul id="historyList"></ul> 
		</div>

		<!-- Control Center -->
		 <div class="content">
            <h3 class="h2">CONTROL CENTER</h3> 
			 <div id="control-buttons" class="flex-container">
	                <button id="btn1">-2</button>
	                <button id="btn2">-1</button>
	                <button id="btn3">Reset</button>
	                <button id="btn4">+1</button>
	                <button id="btn5">+2</button>
	         </div>

             <div class="flex-container">
            	<button id="clearButton">Clear History & Results</button>

             </div>

         </div>

	</div>



	<script type="text/javascript">
	var total = 0; // Initialize total to 0
	let history = [];
	let operationCount = { additions: 0, subtractions: 0 }; // 初始化操作计数

	// ClearAll function to reset everything
	function ClearAll() {
	    total = 0;
	    history = [];
	    operationCount.additions = 0;
	    operationCount.subtractions = 0;

	    // 调用更新函数来刷新界面
	    document.querySelector("#resultId").innerHTML = total;
	    updateHistory();
	    updateSummary();
	    checkTotal();
	}

	// 更新历史记录并为每个项添加点击事件
	function updateHistory() {
	    let historyContent = "";
	    for (let i = 0; i < history.length; i++) {
	        historyContent += "<li onclick='removeHistoryItem(" + i + ")'>" + history[i] + "</li>";
	    }
	    document.querySelector("#historyList").innerHTML = historyContent;
	}

	// 删除历史记录项并更新显示
	function removeHistoryItem(index) {
	    history.splice(index, 1); // 删除选中的历史项
	    updateHistory(); // 删除后更新历史显示
	}

	// 更新操作总结
	function updateSummary() {
	    document.querySelector("#summary").innerHTML = `Total additions: ${operationCount.additions}, <br> Total subtractions: ${operationCount.subtractions}`;
	}

	// 检查 total 值
	function checkTotal() {
	    if (total > 0) {
	        document.querySelector("#totalMessage").innerHTML = "The total is positive.";
	    } else if (total < 0) {
	        document.querySelector("#totalMessage").innerHTML = "The total is negative.";
	    } else {
	        document.querySelector("#totalMessage").innerHTML = "The total is zero.";
	    }
	}

	// 按钮事件监听器
	document.getElementById("btn1").addEventListener("click", function() {
	    total -= 2;
	    document.querySelector("#resultId").innerHTML = total;
	    history.push("-2");
	    operationCount.subtractions += 1;
	    updateHistory();
	    checkTotal();
	    updateSummary();
	});

	document.getElementById("btn2").addEventListener("click", function() {
	    total -= 1;
	    document.querySelector("#resultId").innerHTML = total;
	    history.push("-1");
	    operationCount.subtractions += 1;
	    updateHistory();
	    checkTotal();
	    updateSummary();
	});

	document.getElementById("btn3").addEventListener("click", function() {
	    total = 0;
	    document.querySelector("#resultId").innerHTML = total;
	    history.push("reset");
	    updateHistory();
	    checkTotal();
	    updateSummary();
	});

	document.getElementById("btn4").addEventListener("click", function() {
	    total += 1;
	    document.querySelector("#resultId").innerHTML = total;
	    history.push("+1");
	    operationCount.additions += 1;
	    updateHistory();
	    checkTotal();
	    updateSummary();
	});

	document.getElementById("btn5").addEventListener("click", function() {
	    total += 2;
	    document.querySelector("#resultId").innerHTML = total;
	    history.push("+2");
	    operationCount.additions += 1;
	    updateHistory();
	    checkTotal();
	    updateSummary();
	});

	// 添加清除按钮的点击事件
	document.getElementById("clearButton").addEventListener("click", function() {
	    ClearAll(); // 调用清除历史记录和结果的函数
	});

		
	</script>
</body>
</html>